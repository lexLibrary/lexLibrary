<!DOCTYPE html>
<html lang="en">

<head>
	[[template "header"]]
	<title>[[.User.DisplayName]]'s Profile - Lex Library</title>
</head>

<body>
<div id="main" class="page-container">

<header class="container grid-xl navbar pt-2">
	<section class="navbar-section">
		<a href="/" class="navbar-brand mr-2">Lex Library</a>
	</section>
	<section class="navbar-section">
		[[if .Self]]
			[[if .User]]
				<a @click="logout" class="btn btn-link" href="">Logout</a>
			[[else]]
				<a class="btn btn-link" href="/login?return=%2F">Log In</a>
			[[end]]
		[[end]]
	</section>
</header>

<div class="page-content container grid-md">
	<div class="columns">
			<div class="profile column text-center">
				<div class="card">
					<div class="card-body relative">
						[[if .Self]]<a class="profile-edit" href="/profile/edit">Settings</a>[[end]]
						<div class="profile-avatar">
							[[if .Self]]
								<a href="/profile/edit" class=" tooltip tooltip-bottom" data-tooltip="Set your profile image">
							[[end]]
								<figure class="avatar avatar-full"data-initial="[[.User.DisplayInitials]]">
									[[if .User.ProfileImage]]
										<p-image src="[[.Base]]/image" alt="[[.User.DisplayName]]">
									[[end]]
								</figure>
							[[if .Self]]</a>[[end]]
							<h3 id="displayName" class="pt-1">[[.User.DisplayName]] 
								[[if not .User.Active]] 
									<small><em>(inactive)</em></small>
								[[else if .User.IsAdmin]]
									<small>(admin)</small>
								[[end]]
							</h3>
						</div>
						<section class="section">
							<div class="columns">
								<div class="column text-center">
									<h5 class="title"><small>Written</small></h5>
									<h3>[[.Stats.DocumentsWritten]]</h3>
								</div>
								<div class="column text-center">
									<h5 class="title"><small>Read</small></h5>
									<h3>[[.Stats.DocumentsRead]]</h3>
								</div>
								<div class="column text-center">
									<h5 class="title"><small>Comments</small></h5>
									<h3>[[.Stats.Comments]]</h3>
								</div>
							</div>
						</section>
						<section>
							<ul class="tab tab-block">
								<li class='tab-item [[if eq .Tab "documents"]]active[[end]]'><a href="[[.Base]]/documents">Documents</a></li>
								[[if .Self]]
								<li class='tab-item [[if eq .Tab "readLater"]]active[[end]]'><a href="[[.Base]]/readLater">Read Later</a></li>
								[[end]]
								<li class='tab-item [[if eq .Tab "comments"]]active[[end]]'><a href="[[.Base]]/comments">Comments</a></li>
								[[if .Self]]
								<li class='tab-item [[if eq .Tab "history"]]active[[end]]'><a href="[[.Base]]/history">History</a></li>
								[[end]]
							</ul>
							[[if eq .Tab "documents"]]
								<p>TODO: documents</p>
							[[else if eq .Tab "readLater"]]
								<p>TODO: readLater</p>
							[[else if eq .Tab "comments"]]
								<p>TODO: comments</p>
							[[else if eq .Tab "history"]]
								<p>TODO: history</p>
							[[end]]
						</section>
					</div>
				</div>
			</div>
	</div>
</div> <!-- page-content -->
[[template "footer" .]]
</div> <!-- page-container -->
</body>

<script src="/js/vue.js"></script>
<script src="/js/profile.js"></script>
</html>
