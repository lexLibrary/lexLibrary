<!DOCTYPE html>
<html lang="en">

<head>
	[[template "header"]]
	<title>[[.User.DisplayName]]'s Profile - Lex Library</title>
</head>

<body>
<div id="main" class="page-container">

<nav class="navbar">
  <a class="navbar-brand" href="/">Lex Library</a>
	<div>
		[[if .Self]]
			<button @click="logout" class="btn btn-link">Logout</button>
		[[else]]
			[[if not ctx.LoggedIn]]
				<a class="btn btn-link" href="/login?return=%2F">Log In</a>
			[[end]]
		[[end]]
	</div>
</nav>

<div class="page-content container position-relative">
	<div class="profile text-center">
		[[if .Self]]<a class="profile-edit" href="/profile/edit">Settings</a>[[end]]
		<div class="profile-avatar">
			[[if .Self]]
				<a href="/profile/edit" class=" tooltip tooltip-bottom" data-tooltip="Set your profile image">
			[[end]]
				<figure class="avatar avatar-full"data-initial="[[.User.DisplayInitials]]">
					[[if .User.ProfileImage]]
						<p-image src="[[.Base]]/image" alt="[[.User.DisplayName]]">
					[[end]]
				</figure>
			[[if .Self]]</a>[[end]]
			<h3 id="displayName" class="pt-2">[[.User.DisplayName]] 
				[[if not .User.Active]] 
					<small class="text-muted"><em>(inactive)</em></small>
				[[else if .User.IsAdmin]]
					<small class="text-muted">(admin)</small>
				[[end]]
			</h3>
		</div>
		<div id="profileStats" class="py-4">
			<div class="row text-center">
				<div class="col">
					<h5 class="title"><small>Written</small></h5>
					<h3>[[.Stats.DocumentsWritten]]</h3>
				</div>
				<div class="col">
					<h5 class="title"><small>Read</small></h5>
					<h3>[[.Stats.DocumentsRead]]</h3>
				</div>
				<div class="col">
					<h5 class="title"><small>Comments</small></h5>
					<h3>[[.Stats.Comments]]</h3>
				</div>
			</div>
		</div>
	</div>
	<div id="profileNav">
		<nav class="nav nav-tabs nav-justified">
			<a class='nav-item nav-link [[if eq .Tab "documents"]]active[[end]]' href="[[.Base]]/documents">Documents</a>
			[[if .Self]]
			<a class='nav-item nav-link [[if eq .Tab "readLater"]]active[[end]]' href="[[.Base]]/readLater">Read Later</a>
			[[end]]
			<a class='nav-item nav-link [[if eq .Tab "comments"]]active[[end]]' href="[[.Base]]/comments">Comments</a>
			[[if .Self]]
			<a class='nav-item nav-link [[if eq .Tab "history"]]active[[end]]' href="[[.Base]]/history">History</a>
			[[end]]
		</nav>
		[[if eq .Tab "documents"]]
			<p>TODO: documents</p>
		[[else if eq .Tab "readLater"]]
			<p>TODO: readLater</p>
		[[else if eq .Tab "comments"]]
			<p>TODO: comments</p>
		[[else if eq .Tab "history"]]
			<p>TODO: history</p>
		[[end]]
	</div>
</div> <!-- page-content -->
[[template "footer" .]]
</div> <!-- page-container -->
</body>

<script src="/js/vue.js"></script>
<script src="/js/profile.js"></script>
</html>
