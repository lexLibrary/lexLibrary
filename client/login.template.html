<!DOCTYPE html>
<html lang="en">

<head>
	[[template "header"]]
	[[if .Unauthorized]]
		<title>Log In to Continue - Lex Library</title>
	[[else]]
		<title>Log In - Lex Library</title>
	[[end]]
</head>

<body>
<div id="login" class="section container grid-xs">
	<div class="columns">
		<div class="column">
			[[if .Unauthorized]]
				<h1 class="text-center">Please Log In to Continue</h1>
			[[else]]
				<h1 class="text-center">Log In to Lex Library</h1>
			[[end]]
			<div class="card">
				<div class="card-body">
					<form @submit="login">
						<div :class="{'has-error': error}" class="form-group">
							<label class="form-label" for="inputUsername">Username</label>
							<input v-model="username" v-focus type="text" class="form-input" id="inputUsername" placeholder="Enter username">
							<p v-if="error" v-cloak class="form-input-hint">{{error}}</p>
						</div>
						<div class="form-group">
							<label class="form-label" for="inputPassword">Password</label>
							<input v-model="password" type="password" class="form-input" id="inputPassword"
								placeholder="Enter password">
						</div>
						<div class="form-group">
							<label class="form-switch" for="inputRememberMe">
								<input v-model="rememberMe" type="checkbox" id="inputRememberMe">
								<i class="form-icon"></i>Remember Me	
							</label>
						</div>
						<button type="submit" :class="{'loading': loading}" class="btn btn-primary btn-block">Log In</button>
					</form>
				</div>
				
				[[if .AllowSignup]]
				<div class="card-footer">
					<span>
						Don't have a login?  <a href="/signup">Signup!</a>
					</span>
				</div>
				[[end]]
			</div>
		</div>
	</div>

	<div :class="{'active': showModal}" class="modal">
		<div class="modal-overlay"></div>
		<div class="modal-container">
			<header class="modal-header">
				<div class="modal-title h5">{{modalTitle}}</div>
			</header>
			<form @submit="changePassword">
				<section class="modal-body">
					<div class="content">
						<div :class="{'has-error': passwordErr}" class="form-group">
							<label class="form-label" for="inputNewPassword">Choose a New Password</label>
							<input v-model="newPassword" @blur="validatePassword" @keydown="passwordErr=null" autofocus
									 type="password" class="form-input" id="inputNewPassword"	placeholder="Enter a new password">
							<p v-if="passwordErr" v-cloak class="form-input-hint">{{passwordErr}}</p>
						</div>
						<div :class="{'has-error': password2Err}"	class="form-group">
							<input v-model="password2" @blur="validatePassword2" @keydown="password2Err=null"	type="password" class="form-input" 
									id="inputPassword2" placeholder="Enter password again">
							<p v-if="password2Err" v-cloak class="form-input-hint">{{password2Err}}</p>
						</div>
					</div>
				</section>
				<footer class="modal-footer">
					<button v-if="user" @click="navigate" type="button" class="btn">Skip</button>
					<button @click="changePassword" type="submit" :class="{'loading': loading}" class="btn btn-primary">Submit</button>
				</footer>
			</form>
		</div>
	</div> <!-- modal -->

</div>
</body>
<script src="/js/vue.js"></script>
<script src="/js/login.js"></script>
</html>
